language: ruby
rvm:
  - 1.9.3
  - rbx-19mode
  - jruby-19mode
  - 2.0.0

matrix:
  allow_failures:
    - rvm: 'rbx-19mode'
    - rvm: 'jruby-19mode'
    - rvm: '2.0.0'


env:
  - DB=postgres BUILD_TYPE=other
  - DB=mysql BUILD_TYPE=other
  - DB=postgres BUILD_TYPE=cucumber
  - DB=mysql BUILD_TYPE=cucumber


bundler_args: "--without development production heroku"
before_install: "./script/ci/before_install.sh"
script: "./script/ci/build.sh"


notifications:
  irc:
    channels:
      - "irc.freenode.org:6667#diaspora-dev"
